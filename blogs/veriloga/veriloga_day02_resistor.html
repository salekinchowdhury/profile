---
layout: archive
title: "VerilogA Day 02: Writing Your First Verilog-A Model (With a Twist of Fun)"
---
    <article class="blog-post">
        <section>
            <p>Welcome to Day 2 of our Verilog-A adventure! If you're like me, every time you crack open a new code or model, you get a little thrill from seeing how something as basic as a resistor can make a world of difference in circuit design. But donâ€™t worry, weâ€™re going to ease into this. Today, youâ€™ll create your first Verilog-A model for a humble resistor.</p>
        </section>

        <section>
            <h2>Step 1: Crafting Your Verilog-A Resistor Model</h2>
            <p>Before you ask, "What's the big deal with a resistor?", think of it like that quiet friend who doesnâ€™t say much but keeps everything chill at the party. Without it, circuits would just be chaotic noise, like a room full of toddlers after cake.</p>
            
            <pre><code>
                `include "constants.vams" // Include Verilog-A libraries
                `include "disciplines.vams" // Include fundamental constants
                
                module simple_resistor(p, n);
                	inout p, n;               // Analog ports
                	electrical p, n;           // Declare these ports as electrical signals
                  
                	parameter real R = 1k;     // Parameter for resistance value
                
                	analog begin
                		V(p, n) <+ I(p, n) * R;  // Ohm's law: V = IR
                	end
                endmodule
           </code></pre>
            
            <p>Boom! You just wrote your first Verilog-A model! If you felt a spark of joy, thatâ€™s because youâ€™re now officially speaking the language of analog design.</p>
            
            <p><strong>Save the file as <code>simple_resistor.va</code>.</strong> Youâ€™ll want to remember this filename like you remember your phoneâ€™s PINâ€”itâ€™ll come in handy soon.</p>
        </section>

        <section>
            <h2>Step 2: Simulation in Cadence Virtuoso</h2>
            <p>Now that you've got the magic code, let's see it come to life in <strong>Cadence Virtuoso</strong>. If youâ€™ve ever worked in a lab, you know that this is the moment where you hook things up and cross your fingers.</p>
            <ol>
                <li>Launch <strong>Virtuoso</strong>.</li>
                <li>Create a new libraryâ€”letâ€™s call it something like <strong>VerilogA_Tutorial</strong>. Fancy, huh?</li>
                <li>Write the Verilog-A code for your resistor model, and save it in a cell named <strong>simple_resistor</strong>.</li>
                <li>Create a schematic with a DC voltage source and connect it to your new Verilog-A resistor.</li>
                <li>Open <strong>ADE Explorer</strong>, select <strong>DC Analysis</strong>, and plot the voltage and current. Run the simulation and enjoy that moment when your resistor behaves exactly as it should.</li>
            </ol>
            
            <blockquote>Itâ€™s like watching a slow-motion high-five between current and voltage. ðŸ™Œ</blockquote>
        </section>

        <section>
            <h2>Step 3: Simulation in Spectre (Terminal-Based)</h2>
            <p>Want to feel like a circuit magician? Time to summon Spectre. Terminal-based simulation is like driving stick shiftâ€”itâ€™s not always necessary, but boy does it feel cool.</p>
            
            <pre><code>simulator lang=spectre               // Specify Spectre as the simulator language

global 0                              // Define ground node

V1 (p 0) vsource dc=5V               // Define a 5V DC voltage source between node 'p' and ground
X1 (p 0) resistor R=1k               // Instantiate the Verilog-A resistor between 'p' and ground, with resistance of 1kÎ©

dcOp analysis1                       // Specify a DC operating point analysis

save V(p) I(V1)                      // Save voltage at node 'p' and current through V1

include "simple_resistor.va"                // Include the Verilog-A model for the resistor</code></pre>
            
            <p>Youâ€™ve got your testbench. Now, to run the simulation:</p>
            
            <pre><code>spectre testbench.scs</code></pre>
            
            <p>Check your results using <strong>WaveViewer</strong> (<code>wv</code>). This is the part where you feel like a wizard in front of a crystal ball, except you're looking at graphs of voltage and current. Seriously satisfying.</p>
        </section>

        <section>
            <h2>Step 4: Simulation in HSPICE</h2>
            <p>No blog series on Verilog-A is complete without a little <strong>HSPICE</strong> action. Itâ€™s like bringing out the vintage vinylâ€”HSPICE has been around, and it knows its stuff.</p>
            
            <pre><code>* HSPICE Test Bench for Verilog-A Resistor Model

.lib "simple_resistor.va" veriloga    * Include the Verilog-A resistor model file

V1 p 0 DC 5V                  * Define a 5V DC voltage source between 'p' and ground (0)

X1 p 0 resistor R=1k           * Instantiate the resistor between 'p' and ground, with R=1kÎ©

.op                            * Perform a DC operating point analysis

.probe V(p) I(V1)              * Save the voltage at node 'p' and current through V1 for plotting

.end                           * End the netlist</code></pre>
            
            <p>Now, to run the simulation:</p>
            
            <pre><code>hspice resistor_tb.sp > output.log</code></pre>
            
            <p>Use <strong>WaveViewer</strong> again to check out your waveforms. Itâ€™s always a good moment when HSPICE gives you the thumbs up.</p>
        </section>

        <section>
            <h2>Wrap-Up</h2>
            <p>By now, youâ€™ve not only written your first Verilog-A model, but youâ€™ve also simulated it in three different ways: <strong>Virtuoso</strong>, <strong>Spectre</strong>, and <strong>HSPICE</strong>. Each step is like adding a new layer to your circuit-design superpowers.</p>
            <p>In the next part, weâ€™ll dig deeper into the Verilog-A universe, but for now, pat yourself on the back. Youâ€™ve come a long way from that blank editor screen.</p>
        </section>

    </article>

</body>
</html>

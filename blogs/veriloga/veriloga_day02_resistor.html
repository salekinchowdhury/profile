---
layout: archive
title: "VerilogA Day 02: Writing Your First Verilog-A Model (With a Twist of Fun)"
---
    <article class="blog-post">
        <section>
            <p>Welcome to Day 2 of our Verilog-A adventure! If you're like me, every time you crack open a new code or model, you get a little thrill from seeing how something as basic as a resistor can make a world of difference in circuit design. But don’t worry, we’re going to ease into this. Today, you’ll create your first Verilog-A model for a humble resistor.</p>
        </section>

        <section>
            <h2>Step 1: Crafting Your Verilog-A Resistor Model</h2>
            <p>Before you ask, "What's the big deal with a resistor?", think of it like that quiet friend who doesn’t say much but keeps everything chill at the party. Without it, circuits would just be chaotic noise, like a room full of toddlers after cake.</p>
            
            <pre><code>include "disciplines.vams"     // Include the necessary Verilog-A libraries

module resistor(p, n);          // Declare a module with two ports 'p' and 'n'
  inout p, n;                   // Define 'p' and 'n' as analog ports (input/output)
  electrical p, n;              // Specify that 'p' and 'n' are electrical nodes

  parameter real R = 1k;        // Declare a parameter 'R' for resistance, default to 1k Ohms

  analog begin
    V(p, n) <+ I(p, n) * R;     // Implement Ohm's law: V = I * R (voltage is proportional to current)
  end
endmodule</code></pre>
            
            <p>Boom! You just wrote your first Verilog-A model! If you felt a spark of joy, that’s because you’re now officially speaking the language of analog design.</p>
            
            <p><strong>Save the file as <code>resistor.va</code>.</strong> You’ll want to remember this filename like you remember your phone’s PIN—it’ll come in handy soon.</p>
        </section>

        <section>
            <h2>Step 2: Simulation in Cadence Virtuoso</h2>
            <p>Now that you've got the magic code, let's see it come to life in <strong>Cadence Virtuoso</strong>. If you’ve ever worked in a lab, you know that this is the moment where you hook things up and cross your fingers.</p>
            <ol>
                <li>Launch <strong>Virtuoso</strong> (cue dramatic music).</li>
                <li>Create a new library—let’s call it something like <strong>VerilogA_Tutorial</strong>. Fancy, huh?</li>
                <li>Write the Verilog-A code for your resistor model, and save it in a cell named <strong>simple_resistor</strong>.</li>
                <li>Create a schematic with a DC voltage source and connect it to your new Verilog-A resistor.</li>
                <li>Open <strong>ADE L</strong>, select <strong>DC Analysis</strong>, and plot the voltage and current. Run the simulation and enjoy that moment when your resistor behaves exactly as it should.</li>
            </ol>
            
            <blockquote>It’s like watching a slow-motion high-five between current and voltage.</blockquote>
        </section>

        <section>
            <h2>Step 3: Simulation in Spectre (Terminal-Based)</h2>
            <p>Want to feel like a circuit magician? Time to summon Spectre. Terminal-based simulation is like driving stick shift—it’s not always necessary, but boy does it feel cool.</p>
            
            <pre><code>simulator lang=spectre               // Specify Spectre as the simulator language

global 0                              // Define ground node

V1 (p 0) vsource dc=5V               // Define a 5V DC voltage source between node 'p' and ground
X1 (p 0) resistor R=1k               // Instantiate the Verilog-A resistor between 'p' and ground, with resistance of 1kΩ

dcOp analysis1                       // Specify a DC operating point analysis

save V(p) I(V1)                      // Save voltage at node 'p' and current through V1

include "resistor.va"                // Include the Verilog-A model for the resistor</code></pre>
            
            <p>You’ve got your testbench. Now, to run the simulation:</p>
            
            <pre><code>spectre testbench.scs</code></pre>
            
            <p>Check your results using <strong>WaveViewer</strong> (<code>wv</code>). This is the part where you feel like a wizard in front of a crystal ball, except you're looking at graphs of voltage and current. Seriously satisfying.</p>
        </section>

        <section>
            <h2>Step 4: Simulation in HSPICE</h2>
            <p>No blog series on Verilog-A is complete without a little <strong>HSPICE</strong> action. It’s like bringing out the vintage vinyl—HSPICE has been around, and it knows its stuff.</p>
            
            <pre><code>* HSPICE Test Bench for Verilog-A Resistor Model

.lib "resistor.va" veriloga    * Include the Verilog-A resistor model file

V1 p 0 DC 5V                  * Define a 5V DC voltage source between 'p' and ground (0)

X1 p 0 resistor R=1k           * Instantiate the resistor between 'p' and ground, with R=1kΩ

.op                            * Perform a DC operating point analysis

.probe V(p) I(V1)              * Save the voltage at node 'p' and current through V1 for plotting

.end                           * End the netlist</code></pre>
            
            <p>Now, to run the simulation:</p>
            
            <pre><code>hspice resistor_tb.sp > output.log</code></pre>
            
            <p>Use <strong>WaveViewer</strong> again to check out your waveforms. It’s always a good moment when HSPICE gives you the thumbs up.</p>
        </section>

        <section>
            <h2>Wrap-Up</h2>
            <p>By now, you’ve not only written your first Verilog-A model, but you’ve also simulated it in three different ways: <strong>Virtuoso</strong>, <strong>Spectre</strong>, and <strong>HSPICE</strong>. Each step is like adding a new layer to your circuit-design superpowers.</p>
            <p>In the next part, we’ll dig deeper into the Verilog-A universe, but for now, pat yourself on the back. You’ve come a long way from that blank editor screen.</p>
        </section>

    </article>

</body>
</html>
